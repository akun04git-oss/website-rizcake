<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8">
  <title>Rizcake and Bakery</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@700&family=Poppins:wght@300;400;600&family=Pacifico&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.css"/>
  <style>
    :root{ --pink:#ffe4f1; --cream:#fff8ee; --lav:#e9dffc; --mint:#d6f5e0; }
    body{ background:var(--cream); font-family:'Poppins',sans-serif; }
    .font-heading{ font-family:'Playfair Display',serif; }
    .font-logo{ font-family:'Pacifico',cursive; }
    .pastel-pink{ background-color:var(--pink); }
    .pastel-lav{ background-color:var(--lav); }
    .pastel-mint{ background-color:var(--mint); }
    .shadow-pastel{ box-shadow:0 8px 30px -10px rgba(0,0,0,.12); }
    .bubble{ display:inline-block; padding:.5rem 1rem; border-radius:1rem; margin:.25rem 0; }
    .bubble-user{ background:#d6f5e0; align-self:flex-end; }
    .bubble-bot{ background:white; align-self:flex-start; }
    .swiper{ width:100%; height:220px; border-radius:.75rem; }
    .swiper-slide img{ width:100%; height:100%; object-fit:cover; border-radius:.5rem; }
    @keyframes fadeIn{ from{opacity:0;transform:translateY(10px)} to{opacity:1;transform:translateY(0)} }
    .fade-in{ animation:fadeIn .6s ease forwards; }
    @media (max-width: 640px){
      .swiper{ height:160px !important; }
      #modalUkuran .grid label{ font-size:.75rem; padding:.25rem .5rem; }
      #modalUkuran > div{ max-height:90vh; overflow-y:auto; }
    }
  </style>
</head>
<body class="text-gray-800">

<script>
  const defaultData = {
    logoText:"Rizcake & Bakery",
    logoUrl:"https://source.unsplash.com/100x100?logo,cake",
    heroTitle:"Pesan Kue Custom, Fresh & Handmade",
    heroSubtitle:"Kue ulang tahun, wedding, atau event spesial Anda. Dibuat dengan bahan berkualitas dan hati!",
    heroImg:"https://source.unsplash.com/600x400?birthday-cake",
    alamat:"Jl. Kue Manis No. 10, Kota Harapan",
    ig:"rizcake",
    tiktok:"rizcake",
    wa:"6288286558593",
    produk:[
      {nama:"Bento Cake Rainbow",gambar:["https://source.unsplash.com/400x400?cake","https://source.unsplash.com/400x400?rainbow+cake","https://source.unsplash.com/400x400?mini+cake"],harga:{Bento:35000,"16 cm":45000,"18 cm":70000,"20 cm":90000,"22 cm":150000}},
      {nama:"Black Forest 16 cm",gambar:["https://source.unsplash.com/400x400?black-forest","https://source.unsplash.com/400x400?cherry+cake","https://source.unsplash.com/400x400?forest"],harga:{Bento:35000,"16 cm":45000,"18 cm":70000,"20 cm":90000,"22 cm":150000}},
      {nama:"Red Velvet 18 cm",gambar:["https://source.unsplash.com/400x400?red-velvet","https://source.unsplash.com/400x400?velvet"],harga:{Bento:35000,"16 cm":45000,"18 cm":70000,"20 cm":90000,"22 cm":150000}}
    ]
  };
  let data = JSON.parse(JSON.stringify(defaultData));
  if(localStorage.webData) data = JSON.parse(localStorage.webData);

  let keranjang = [];
  let namaPemesan = "";
</script>

<!-- HEADER -->
<header class="sticky top-0 z-40 pastel-pink shadow-md">
  <div class="max-w-6xl mx-auto px-4 flex items-center justify-between h-16">
    <div class="flex items-center gap-3">
      <img id="logoImg" src="" class="h-10 w-10 rounded-full object-cover">
      <span id="logoText" class="font-logo text-xl text-pink-700"></span>
    </div>
    <nav class="hidden md:flex gap-6 text-sm font-medium items-center">
      <a href="#home" class="hover:text-pink-700">Home</a>
      <a href="#produk" class="hover:text-pink-700">Menu Kue</a>
      <a href="#cara" class="hover:text-pink-700">Cara Pesan</a>
      <a href="#kontak" class="hover:text-pink-700">Kontak</a>
      <button id="btnAdmin" class="bg-white px-3 py-1 rounded-full text-xs border">Admin</button>
      <button id="btnKeranjang" class="ml-2 bg-pink-700 text-white px-3 py-1 rounded-full text-xs relative">
        üõí <span id="jmlKeranjang" class="absolute -top-1 -right-1 bg-red-500 text-white rounded-full w-4 h-4 text-xs flex items-center justify-center">0</span>
      </button>
    </nav>
    <button id="hamburger" class="md:hidden text-2xl">‚ò∞</button>
  </div>
</header>
<div id="mobileMenu" class="hidden md:hidden pastel-pink px-4 pb-4 text-sm space-y-2">
  <a href="#home" class="block">Home</a>
  <a href="#produk" class="block">Menu Kue</a>
  <a href="#cara" class="block">Cara Pesan</a>
  <a href="#kontak" class="block">Kontak</a>
  <button id="btnAdmin2" class="bg-white px-3 py-1 rounded-full text-xs border">Admin</button>
  <button id="btnKeranjang2" class="bg-pink-700 text-white px-3 py-1 rounded-full text-xs relative">
    üõí <span id="jmlKeranjang2" class="absolute -top-1 -right-1 bg-red-500 text-white rounded-full w-4 h-4 text-xs flex items-center justify-center">0</span>
  </button>
</div>

<!-- HERO dengan Background Banner -->
<section id="home" class="relative pastel-mint overflow-hidden">
  <!-- Background tambahan (bisa diganti admin) -->
  <div class="absolute inset-0 opacity-20">
    <img src="https://source.unsplash.com/1600x600?cake,party" class="w-full h-full object-cover">
  </div>
  <div class="relative max-w-6xl mx-auto px-4 py-16 grid md:grid-cols-2 items-center gap-6 fade-in">
    <div>
      <h1 id="heroTitle" class="font-heading text-4xl md:text-5xl text-pink-700 leading-tight"></h1>
      <p id="heroSubtitle" class="mt-4 text-gray-700"></p>
    </div>
    <div class="rounded-2xl overflow-hidden shadow-pastel">
      <img id="heroImg" src="" class="w-full">
    </div>
  </div>
</section>

<!-- BUBBLE CHAT + INPUT NAMA -->
<section class="py-6 px-4 max-w-3xl mx-auto">
  <div id="chatBox" class="flex flex-col gap-2 text-sm">
    <div class="bubble bubble-bot shadow font-medium">üëã Hai! Siapa nama Anda?</div>
    <input id="inpNama" type="text" placeholder="Ketik nama Anda di sini..." class="self-end border rounded-lg px-3 py-2 w-64 max-w-full">
    <button id="btnSimpanNama" class="self-end bg-pink-600 text-white rounded-lg px-4 py-2 mt-2 hover:bg-pink-700">Simpan</button>
    <div id="chatAfterNama" class="hidden flex flex-col gap-2">
      <div class="bubble bubble-user shadow"><span id="namaUser"></span></div>
      <div class="bubble bubble-bot shadow">Mau lihat menu kue?</div>
    </div>
  </div>
</section>

<!-- PRODUK + TOMBOL TAMBAH KE KERANJANG -->
<section id="produk" class="py-12 px-4 max-w-6xl mx-auto">
  <h2 class="font-heading text-3xl font-bold text-center mb-8 text-pink-700 fade-in">Menu Kue</h2>
  <div id="produkGrid" class="grid sm:grid-cols-2 lg:grid-cols-3 gap-6 fade-in"></div>
</section>

<!-- KERANJANG BELANJA -->
<section id="keranjang" class="py-12 px-4 max-w-4xl mx-auto hidden">
  <h2 class="font-heading text-3xl font-bold text-center mb-6 text-pink-700 fade-in">Keranjang Belanja</h2>
  <div id="isiKeranjang" class="space-4 fade-in"></div>
  <div class="mt-6 text-right">
    <button id="btnCheckout" class="bg-pink-600 text-white px-6 py-3 rounded-xl hover:bg-pink-700">Checkout ‚Üí</button>
  </div>
</section>

<!-- CARA PESAN -->
<section id="cara" class="py-12 px-4 max-w-4xl mx-auto">
  <h2 class="font-heading text-3xl font-bold text-center mb-8 text-pink-700 fade-in">Cara Pemesanan</h2>
  <div class="grid md:grid-cols-3 gap-6 text-center fade-in">
    <div class="pastel-lav p-6 rounded-xl shadow-pastel"><div class="text-3xl mb-2">1Ô∏è‚É£</div><p>Pilih gambar kue favorit Anda</p></div>
    <div class="pastel-mint p-6 rounded-xl shadow-pastel"><div class="text-3xl mb-2">2Ô∏è‚É£</div><p>Klik tombol <b>Tambah ke Keranjang</b></p></div>
    <div class="pastel-pink p-6 rounded-xl shadow-pastel"><div class="text-3xl mb-2">3Ô∏è‚É£</div><p>Checkout & kirim pesan via WhatsApp</p></div>
  </div>
</section>

<!-- FOOTER -->
<footer id="kontak" class="pastel-pink mt-12">
  <div class="max-w-6xl mx-auto px-4 py-8 text-sm text-center text-gray-700 space-y-2 fade-in">
    <p id="alamatToko"></p>
    <p>
      <a id="igLink" class="text-pink-700 font-medium" href="" target="_blank">Instagram</a> |
      <a id="tiktokLink" class="text-pink-700 font-medium" href="" target="_blank">TikTok</a> |
      <a id="waLink" class="text-pink-700 font-medium" href="" target="_blank">WhatsApp</a>
    </p>
    <p>¬© <span id="tahun"></span> <span class="logoF"></span>. All rights reserved.</p>
  </div>
</footer>

<!-- MODAL UKURAN -->
<div id="modalUkuran" class="fixed inset-0 bg-black bg-opacity-40 hidden place-items-center z-50">
  <div class="bg-white rounded-2xl w-[90%] max-w-2xl p-4 md:p-6 shadow-xl">
    <div class="flex justify-between items-center mb-3">
      <h3 id="modalNamaKue" class="font-heading text-lg font-bold text-pink-700">Pilih Ukuran</h3>
      <button id="closeModal" class="text-2xl leading-none">&times;</button>
    </div>
    <div class="swiper mySwiper mb-4"><div class="swiper-wrapper" id="swiperWrapper"></div><div class="swiper-button-next"></div><div class="swiper-button-prev"></div><div class="swiper-pagination"></div></div>
    <div class="grid grid-cols-2 md:grid-cols-5 gap-3 mb-4">
      <label class="cursor-pointer"><input type="radio" name="ukuran" value="Bento" class="mr-2" checked>Bento</label>
      <label class="cursor-pointer"><input type="radio" name="ukuran" value="16 cm" class="mr-2">16 cm</label>
      <label class="cursor-pointer"><input type="radio" name="ukuran" value="18 cm" class="mr-2">18 cm</label>
      <label class="cursor-pointer"><input type="radio" name="ukuran" value="20 cm" class="mr-2">20 cm</label>
      <label class="cursor-pointer"><input type="radio" name="ukuran" value="22 cm" class="mr-2">22 cm</label>
    </div>
    <div class="text-sm text-gray-600 mb-4">
      Bento = Rp 30.000 ‚Äì 35.000<br>16 cm = Rp 40.000 ‚Äì 50.000<br>18 cm = Rp 60.000 ‚Äì 75.000<br>20 cm = Rp 80.000 ‚Äì 100.000<br>22 cm = Rp 100.000 ‚Äì 200.000
    </div>
    <div class="flex gap-3">
      <button id="btnTambahKeranjang" class="flex-1 bg-pink-600 text-white py-3 rounded-xl hover:bg-pink-700">Tambah ke Keranjang</button>
      <button id="btnBatalModal" class="flex-1 bg-gray-200 text-gray-800 py-3 rounded-xl hover:bg-gray-300">Batal</button>
    </div>
  </div>
</div>

<!-- ADMIN PANEL -->
<div id="adminPanel" class="hidden fixed bottom-4 right-4 bg-white rounded-xl shadow-lg p-4 w-80 text-sm max-h-[70vh] overflow-y-auto">
  <h4 class="font-heading font-bold mb-3 text-pink-700">Admin Panel</h4>
  <label class="block mb-1 font-medium">Nama Toko</label><input id="inpLogoText" class="w-full border rounded px-2 py-1 mb-2">
  <label class="block mb-1 font-medium">URL Logo (100x100)</label><input id="inpLogoUrl" class="w-full border rounded px-2 py-1 mb-3">
  <label class="block mb-1 font-medium">Hero Judul</label><input id="inpHeroTitle" class="w-full border rounded px-2 py-1 mb-2">
  <label class="block mb-1 font-medium">Hero Sub-judul</label><textarea id="inpHeroSub" class="w-full border rounded px-2 py-1 mb-2 text-xs" rows="2"></textarea>
  <label class="block mb-1 font-medium">Hero Background Banner</label><input id="inpHeroBg" class="w-full border rounded px-2 py-1 mb-3">
  <label class="block mb-1 font-medium">Alamat Toko</label><textarea id="inpAlamat" class="w-full border rounded px-2 py-1 mb-2 text-xs" rows="2"></textarea>
  <label class="block mb-1 font-medium">Instagram (tanpa @)</label><input id="inpIG" class="w-full border rounded px-2 py-1 mb-2">
  <label class="block mb-1 font-medium">TikTok (tanpa @)</label><input id="inpTiktok" class="w-full border rounded px-2 py-1 mb-2">
  <label class="block mb-1 font-medium">WhatsApp (62xxx)</label><input id="inpWA" class="w-full border rounded px-2 py-1 mb-3">
  <label class="block mb-1 font-medium">Produk (satu per baris: nama|url1,url2,...)</label><textarea id="inpProduk" class="w-full border rounded px-2 py-1 mb-3 text-xs" rows="4"></textarea>
  <div class="flex gap-2">
    <button id="btnSimpanAdmin" class="bg-pink-600 text-white px-3 py-1 rounded hover:bg-pink-700">Simpan Semua</button>
    <button id="btnResetAdmin" class="bg-gray-200 text-gray-800 px-3 py-1 rounded hover:bg-gray-300">Reset</button>
  </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.js"></script>
<script>
// APPLY DATA
function applyData(){
  document.getElementById('logoImg').src = data.logoUrl;
  document.getElementById('logoText').textContent = data.logoText;
  document.getElementById('heroTitle').textContent = data.heroTitle;
  document.getElementById('heroSubtitle').textContent = data.heroSubtitle;
  document.getElementById('heroImg').src = data.heroImg;
  document.querySelector('#home .absolute img').src = data.heroBg || defaultData.heroBg;
  document.getElementById('alamatToko').textContent = data.alamat;
  document.getElementById('igLink').href = `https://instagram.com/${data.ig}`;
  document.getElementById('tiktokLink').href = `https://tiktok.com/@${data.tiktok}`;
  document.getElementById('waLink').href = `https://wa.me/${data.wa}`;
  document.querySelectorAll('.logoF').forEach(el=>el.textContent=data.logoText);
  document.getElementById('tahun').textContent = new Date().getFullYear();
  renderProduk(); renderKeranjang();
}
applyData();

// RENDER PRODUK
function renderProduk(){
  const grid = document.getElementById('produkGrid');
  grid.innerHTML = data.produk.map((k,i)=>`
    <div class="bg-white rounded-xl shadow-pastel overflow-hidden flex flex-col fade-in">
      <img src="${k.gambar[0]}" class="w-full h-48 object-cover">
      <div class="p-4 flex-1 flex flex-col">
        <h3 class="font-bold text-pink-700 mb-2">${k.nama}</h3>
        <button data-idx="${i}" class="btnPesan mt-auto bg-pink-600 text-white py-2 rounded-lg hover:bg-pink-700">Pilih & Tambah ke Keranjang</button>
      </div>
    </div>
  `).join('');
}

// KERANJANG
function tambahKeKeranjang(idx, ukuran, gambarUrl){
  const k = data.produk[idx];
  const harga = k.harga[ukuran];
  keranjang.push({nama:k.nama, ukuran, harga, gambar:gambarUrl});
  updateJmlKeranjang();
  renderKeranjang();
  alert(`${k.nama} (${ukuran}) ditambahkan ke keranjang!`);
  tutupModal();
}
function updateJmlKeranjang(){
  const jml = keranjang.length;
  document.getElementById('jmlKeranjang').textContent = jml;
  document.getElementById('jmlKeranjang2').textContent = jml;
}
function renderKeranjang(){
  const div = document.getElementById('isiKeranjang');
  if(keranjang.length===0){
    div.innerHTML = '<p class="text-center text-gray-600">Keranjang kosong</p>';
    document.getElementById('keranjang').classList.add('hidden');
    return;
  }
  document.getElementById('keranjang').classList.remove('hidden');
  div.innerHTML = keranjang.map((item,i)=>`
    <div class="bg-white rounded-xl shadow-pastel p-4 flex items-center gap-4 fade-in">
      <img src="${item.gambar}" class="w-20 h-20 object-cover rounded-lg">
      <div class="flex-1">
        <h4 class="font-bold text-pink-700">${item.nama}</h4>
        <p class="text-sm text-gray-600">${item.ukuran} ‚Äì Rp ${item.harga.toLocaleString()}</p>
      </div>
      <button onclick="hapusKeranjang(${i})" class="text-red-600 font-bold">‚úï</button>
    </div>
  `).join('');
}
function hapusKeranjang(i){
  keranjang.splice(i,1);
  updateJmlKeranjang();
  renderKeranjang();
}

// MODAL UKURAN
let swiper, idxActive, gambarAktif;
function bukaModal(idx){
  idxActive = idx;
  const k = data.produk[idx];
  document.getElementById('modalNamaKue').textContent = k.nama;
  document.getElementById('swiperWrapper').innerHTML = k.gambar.map(g=>`<div class="swiper-slide"><img src="${g}" alt="img"></div>`).join('');
  document.getElementById('modalUkuran').classList.remove('hidden');
  document.getElementById('modalUkuran').classList.add('grid');
  if(swiper) swiper.destroy(true,true);
  swiper = new Swiper(".mySwiper",{
    pagination:{el:".swiper-pagination",clickable:true},
    navigation:{nextEl:".swiper-button-next",prevEl:".swiper-button-prev"},
    loop:true,
    on:{ slideChange:function(){ gambarAktif = this.slides[this.activeIndex].querySelector('img').src; } }
  });
  gambarAktif = k.gambar[0];
}
function tutupModal(){
  document.getElementById('modalUkuran').classList.add('hidden');
  document.getElementById('modalUkuran').classList.remove('grid');
}
document.addEventListener('click',e=>{
  if(e.target.classList.contains('btnPesan')) bukaModal(+e.target.dataset.idx);
});
document.getElementById('closeModal').onclick = tutupModal;
document.getElementById('btnBatalModal').onclick = tutupModal;

document.getElementById('btnTambahKeranjang').onclick = ()=>{
  const ukuran = document.querySelector('input[name="ukuran"]:checked').value;
  tambahKeKeranjang(idxActive, ukuran, gambarAktif);
};

// CHAT NAMA
document.getElementById('btnSimpanNama').onclick = ()=>{
  namaPemesan = document.getElementById('inpNama').value.trim();
  if(!namaPemesan) return alert('Nama tidak boleh kosong');
  document.getElementById('namaUser').textContent = namaPemesan;
  document.getElementById('chatAfterNama').classList.remove('hidden');
  document.getElementById('inpNama').disabled = true;
  document.getElementById('btnSimpanNama').disabled = true;
};

// CHECKOUT ‚Üí KIRIM KE WA
document.getElementById('btnCheckout').onclick = ()=>{
  if(keranjang.length===0) return alert('Keranjang kosong');
  if(!namaPemesan){
    alert('Silakan isi nama Anda di bagian chat');
    document.getElementById('inpNama').focus();
    return;
  }
  let pesan = `Halo, saya ${namaPemesan} ingin memesan kue:\n`;
  let total = 0;
  keranjang.forEach(item=>{
    pesan += `- ${item.nama} (${item.ukuran}) ‚Äì Rp ${item.harga.toLocaleString()}\n`;
    total += item.harga;
  });
  pesan += `Total: Rp ${total.toLocaleString()}\n\nGambar yang saya pilih:\n`;
  keranjang.forEach(item=> pesan += `${item.gambar}\n`);
  pesan += "\nTambahan permintaan: ...";
  window.open(`https://wa.me/${data.wa}?text=${encodeURIComponent(pesan)}`,'_blank');
};

// KERANJANG BUTTON
document.getElementById('btnKeranjang').onclick = ()=>{
  document.getElementById('keranjang').scrollIntoView({behavior:'smooth'});
};
document.getElementById('btnKeranjang2').onclick = ()=>{
  document.getElementById('keranjang').scrollIntoView({behavior:'smooth'});
};

// ADMIN
let adminMode = false;
function cekAdmin(){
  const u = prompt("Username admin:");
  if(u !== "rizcake") return alert("Username salah");
  const p = prompt("Password:");
  if(p !== "R.102010") return alert("Password salah");
  adminMode = true;
  isiFormAdmin();
  document.getElementById('adminPanel').classList.remove('hidden');
}
document.getElementById('btnAdmin').onclick = cekAdmin;
document.getElementById('btnAdmin2').onclick = cekAdmin;

function isiFormAdmin(){
  document.getElementById('inpLogoText').value = data.logoText;
  document.getElementById('inpLogoUrl').value = data.logoUrl;
  document.getElementById('inpHeroTitle mb-3 text-xs" rows="4"></textarea>
  <div class="flex gap-2">
    <button id="btnSimpanAdmin" class="bg-pink-600 text-white px-3 py-1 rounded hover:bg-pink-700">Simpan Semua</button>
    <button id="btnResetAdmin" class="bg-gray-200 text-gray-800 px-3 py-1 rounded hover:bg-gray-300">Reset</button>
  </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.js"></script>
<script>
// ---------- DATA DEFAULT ----------
const defaultData = {
  logoText:"Rizcake & Bakery",
  logoUrl:"https://source.unsplash.com/100x100?logo,cake",
  heroTitle:"Pesan Kue Custom, Fresh & Handmade",
  heroSubtitle:"Kue ulang tahun, wedding, atau event spesial Anda. Dibuat dengan bahan berkualitas dan hati!",
  heroImg:"https://source.unsplash.com/600x400?birthday-cake",
  heroBg:"https://source.unsplash.com/1600x600?pastel,cake",
  alamat:"Jl. Kue Manis No. 10, Kota Harapan",
  ig:"rizcake",
  tiktok:"rizcake",
  wa:"6288286558593",
  produk:[
    {nama:"Bento Cake Rainbow",gambar:["https://source.unsplash.com/400x400?cake","https://source.unsplash.com/400x400?rainbow+cake","https://source.unsplash.com/400x400?mini+cake"]},
    {nama:"Black Forest 16 cm",gambar:["https://source.unsplash.com/400x400?black-forest","https://source.unsplash.com/400x400?cherry+cake","https://source.unsplash.com/400x400?forest"]},
    {nama:"Red Velvet 18 cm",gambar:["https://source.unsplash.com/400x400?red-velvet","https://source.unsplash.com/400x400?velvet"]},
    {nama:"Lapis Surabaya 20 cm",gambar:["https://source.unsplash.com/400x400?layer+cake","https://source.unsplash.com/400x400?indonesian+cake"]},
    {nama:"Tiramisu Cake 22 cm",gambar:["https://source.unsplash.com/400x400?tiramisu","https://source.unsplash.com/400x400?coffee+cake","https://source.unsplash.com/400x400?italian+dessert"]}
  ]
};
let data = JSON.parse(JSON.stringify(defaultData));
if(localStorage.webData) data = JSON.parse(localStorage.webData);

// ---------- KERANJANG ----------
let keranjang = [];
let namaPemesan = "";

// ---------- APPLY DATA ----------
function applyData(){
  document.getElementById('logoImg').src = data.logoUrl;
  document.getElementById('logoText').textContent = data.logoText;
  document.getElementById('heroTitle').textContent = data.heroTitle;
  document.getElementById('heroSubtitle').textContent = data.heroSubtitle;
  document.getElementById('heroImg').src = data.heroImg;
  document.getElementById('heroBg').src = data.heroBg;
  document.getElementById('alamatToko').textContent = data.alamat;
  document.getElementById('igLink').href = `https://instagram.com/${data.ig}`;
  document.getElementById('tiktokLink').href = `https://tiktok.com/@${data.tiktok}`;
  document.getElementById('waLink').href = `https://wa.me/${data.wa}`;
  document.querySelectorAll('.logoF').forEach(el=>el.textContent=data.logoText);
  document.getElementById('tahun').textContent = new Date().getFullYear();
  renderProduk();
  animasiMasuk();
}
applyData();

function renderProduk(){
  const grid = document.getElementById('produkGrid');
  grid.innerHTML = data.produk.map((k,i)=>`
    <div class="bg-white rounded-xl shadow-pastel overflow-hidden flex flex-col fade-in">
      <img src="${k.gambar[0]}" class="w-full h-48 object-cover">
      <div class="p-4 flex-1 flex flex-col">
        <h3 class="font-bold text-pink-700 mb-2">${k.nama}</h3>
        <button data-idx="${i}" class="btnPilih mt-auto bg-pink-600 text-white py-2 rounded-lg hover:bg-pink-700">Pilih & Tambah ke Keranjang</button>
      </div>
    </div>
  `).join('');
}

// ---------- NAMA PEMESAN ----------
document.getElementById('btnSimpanNama').onclick = ()=>{
  const val = document.getElementById('inpNama').value.trim();
  if(!val) return alert("Nama tidak boleh kosong");
  namaPemesan = val;
  document.getElementById('namaUser').textContent = namaPemesan;
  document.getElementById('chatAfterNama').classList.remove('hidden');
  document.getElementById('inpNama').disabled = true;
  document.getElementById('btnSimpanNama').disabled = true;
};

// ---------- MODAL & KERANJANG ----------
let swiper, idxActive, imgActive;
function bukaModal(idx){
  idxActive = idx;
  const k = data.produk[idx];
  document.getElementById('modalNamaKue').textContent = k.nama;
  document.getElementById('swiperWrapper').innerHTML = k.gambar.map(g=>`<div class="swiper-slide"><img src="${g}" alt="img"></div>`).join('');
  document.getElementById('modalUkuran').classList.remove('hidden');
  document.getElementById('modalUkuran').classList.add('grid');
  if(swiper) swiper.destroy(true,true);
  swiper = new Swiper(".mySwiper",{
    pagination:{el:".swiper-pagination",clickable:true},
    navigation:{nextEl:".swiper-button-next",prevEl:".swiper-button-prev"},
    loop:true,
    on:{ slideChangeTransitionEnd:function(){
      imgActive = swiper.slides[swiper.activeIndex].querySelector('img').src;
    }}
  });
  imgActive = k.gambar[0];
}
function tutupModal(){
  document.getElementById('modalUkuran').classList.add('hidden');
  document.getElementById('modalUkuran').classList.remove('grid');
}
document.addEventListener('click',e=>{
  if(e.target.classList.contains('btnPilih')){
    if(!namaPemesan){ alert("Silakan isi nama Anda dulu di bagian atas"); return; }
    bukaModal(+e.target.dataset.idx);
  }
});
document.getElementById('closeModal').onclick = tutupModal;
document.getElementById('btnBatalModal').onclick = tutupModal;

// ---------- TAMBAH KE KERANJANG ----------
document.getElementById('btnTambahKeranjang').onclick = ()=>{
  const ukuran = document.querySelector('input[name="ukuran"]:checked').value;
  const k = data.produk[idxActive];
  const item = {nama:k.nama, ukuran:ukuran, img:imgActive, harga:ukuran};
  keranjang.push(item);
  tampilkanKeranjang();
  tutupModal();
  document.getElementById('keranjang').classList.remove('hidden');
  animasiMasuk();
};

// ---------- TAMPILKAN KERANJANG ----------
function tampilkanKeranjang(){
  const div = document.getElementById('isiKeranjang');
  if(keranjang.length===0){ div.innerHTML='<p class="text-gray-600">Keranjang kosong.</p>'; return; }
  div.innerHTML = keranjang.map((it,i)=>`
    <div class="bg-white rounded-xl shadow-pastel p-4 flex items-center gap-4 fade-in">
      <img src="${it.img}" class="w-20 h-20 object-cover rounded-lg">
      <div class="flex-1">
        <div class="font-bold text-pink-700">${it.nama}</div>
        <div class="text-sm text-gray-600">Ukuran: ${it.ukuran}</div>
      </div>
      <button onclick="hapusItem(${i})" class="text-red-600 hover:underline text-sm">Hapus</button>
    </div>
  `).join('');
}
function hapusItem(i){ keranjang.splice(i,1); tampilkanKeranjang(); }

// ---------- CHECKOUT ----------
document.getElementById('btnCheckout').onclick = ()=>{
  if(keranjang.length===0) return alert("Keranjang masih kosong");
  let pesan = `Halo, saya ${namaPemesan} ingin memesan:\n`;
  keranjang.forEach((it,i)=>{
    pesan += `${i+1}. *${it.nama}* - Ukuran ${it.ukuran}\n`;
  });
  pesan += "\n*Gambar terlampir sesuai preview.*";
  window.open(`https://wa.me/${data.wa}?text=${encodeURIComponent(pesan)}`,'_blank');
};

// ---------- ADMIN ----------
let adminMode = false;
function cekAdmin(){
  const u = prompt("Username admin:");
  if(u !== "rizcake") return alert("Username salah");
  const p = prompt("Password:");
  if(p !== "R.102010") return alert("Password salah");
  adminMode = true;
  isiFormAdmin();
  document.getElementById('adminPanel').classList.remove('hidden');
}
document.getElementById('btnAdmin').onclick = cekAdmin;
document.getElementById('btnAdmin2').onclick = cekAdmin;

function isiFormAdmin(){
  document.getElementById('inpLogoText').value = data.logoText;
  document.getElementById('inpLogoUrl').value = data.logoUrl;
  document.getElementById('inpHeroTitle').value = data.heroTitle;
  document.getElementById('inpHeroSub').value = data.heroSubtitle;
  document.getElementById('inpHeroImg').value = data.heroImg;
  document.getElementById('inpHeroBg').value = data.heroBg;
  document.getElementById('inpAlamat').value = data.alamat;
  document.getElementById('inpIG').value = data.ig;
  document.getElementById('inpTiktok').value = data.tiktok;
  document.getElementById('inpWA').value = data.wa;
  document.getElementById('inpProduk').value = data.produk.map(p=>`${p.nama}|${p.gambar.join(',')}`).join('\n');
}
document.getElementById('btnSimpanAdmin').onclick = ()=>{
  data.logoText = document.getElementById('inpLogoText').value.trim();
  data.logoUrl = document.getElementById('inpLogoUrl').value.trim();
  data.heroTitle = document.getElementById('inpHeroTitle').value.trim();
  data.heroSubtitle = document.getElementById('inpHeroSub').value.trim();
  data.heroImg = document.getElementById('inpHeroImg').value.trim();
  data.heroBg = document.getElementById('inpHeroBg').value.trim();
  data.alamat = document.getElementById('inpAlamat').value.trim();
  data.ig = document.getElementById('inpIG').value.trim();
  data.tiktok = document.getElementById('inpTiktok').value.trim();
  data.wa = document.getElementById('inpWA').value.trim();
  data.produk = document.getElementById('inpProduk').value.split('\n').filter(l=>l).map(line=>{
    const [nama,...urls] = line.split('|');
    return {nama:nama.trim(), gambar:urls.length?urls[0].split(',').map(u=>u.trim()):["https://source.unsplash.com/400x400?cake"]};
  });
  localStorage.webData = JSON.stringify(data);
  applyData();
  alert("Tersimpan! Refresh halaman jika perlu.");
};
document.getElementById('btnResetAdmin').onclick = ()=>{
  if(confirm("Yakin reset ke data awal?")){ localStorage.removeItem('webData'); location.reload(); }
};

document.getElementById('hamburger').onclick = ()=>{
  document.getElementById('mobileMenu').classList.toggle('hidden');
};

// ---------- ANIMASI MASUK ----------
function animasiMasuk(){
  document.querySelectorAll('.fade-in').forEach(el=>{
    el.style.opacity="0"; el.style.transform="translateY(20px)";
    setTimeout(()=>{el.style.transition="all .6s ease"; el.style.opacity="1"; el.style.transform="translateY(0)";},100);
  });
}
animasiMasuk();
</script>
</body>
</html>
